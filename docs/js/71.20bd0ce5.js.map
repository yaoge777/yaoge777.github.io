{"version":3,"file":"js/71.20bd0ce5.js","mappings":"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","sources":["webpack://blog-vue3/./src/views/articles/OtherOne.vue?33cc","webpack://blog-vue3/./src/views/articles/OtherOne.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-27e75408\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"container\" }\nconst _hoisted_2 = { style: {\"width\":\"90%\"} }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Vue router动态路由遇到的两个问题\", -1))\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"这是我在后台管理项目中遇到的两个当时让我很苦恼的问题。后台管理项目网上有很多教学。 我想自己重头写一个，包括前端和后端。结果踩了两个雷，当时折腾了好久，希望可以帮到各位避雷。\", -1))\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", { id: \"ot1\" }, \"#项目快速概述\", -1))\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"不同的用户有不同的权限和菜单内容（指的是侧边菜单栏）。可以使用退出功能退出账号并清除路由信息和菜单栏内容。\", -1))\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: \"pics/t1-1.jpg\",\n  style: {\"margin-top\":\"10px\",\"width\":\"100%\"}\n}, null, -1))\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", { id: \"ot2\" }, \"#问题一：刷新后菜单栏内容会直接消失\", -1))\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"原因：将菜单栏内容保存在了pinia里，而每一次刷新会导致pinia重置，丢失所有保存在其中的信息。同时vue-router也会重置，导致所有动态加载的路由丢失 解决办法：将需要保存的信息存储在cookie中\", -1))\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"pre\", null, \"\\n          Cookie.set('menuData', JSON.stringify([...router.getRoutes().\\n          filter(v => v.name=='main')[0].children]))\\n          Cookie.set('addMenu', JSON.stringify(routeData))\\n          Cookie.set('token', '1')\\n\\n        \", -1))\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"在pinia中，从cookie中提取保存的信息\", -1))\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"pre\", null, \"          setRoute:function(){\\n                if(!Cookie.get('token')) return\\n                if(this.addMenu.length == 0){\\n                  this.addMenu = JSON.parse(Cookie.get('addMenu') as string)\\n                  this.menuData = JSON.parse(Cookie.get('menuData') as string)\\n                  this.token = Cookie.get('token') as string\\n                  // this.setComponent()\\n                }\\n                this.addMenu.forEach((e:any) => {\\n                  this.getParentRoutes(e)\\n                })\\n          },\\n\\n        \", -1))\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"在App.vued的setup钩子函数中，调用pinia中的方法\", -1))\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"pre\", null, \"\\n          <emplate>\\n            <div id=\\\"app\\\">\\n              <router-view></router-view>\\n            </div>\\n          /<emplate>\\n\\n          <script setup lang='ts'>\\n          import {useMenuStore} from '@/store/index'\\n          import Cookie from 'js-cookie';\\n          import {useRouter} from 'vue-router'\\n          const menuStore = useMenuStore()\\n          menuStore.setRoute()\\n          const router = useRouter()\\n          router.push('/main/home')\\n          </script>\\n\\n        \", -1))\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", { id: \"ot3\" }, \"#问题二：菜单内容无法清除\", -1))\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"使用退出功能退出后，登陆新的账户，会发现上一个用户的菜单栏内容依然会在新的用户这里出现 因为我的菜单栏使用了element plus的组件，而这个组件又使用到了<keep alive>标签，因此，就算清除了pinia中保存的信息，并离开了当前页面，组件中依然会保留当前的菜单栏内容。所以下一个用户登录时，依然会看到上一个用户所留下的菜单栏内容 解决办法：不要使用router.push(‘/login’)去到登录页面，要刷新一次，因为这样会让页面重新渲染从而清除之前保留下的所有信息。 \", -1))\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"pre\", null, \"\\n          const logOut = () => {\\n          useMenu.menuData = []\\n          useMenu.addMenu=[]\\n          useMenu.token=''\\n          Cookie.remove('menuData', {path:'/', domain:'localhost'})\\n          Cookie.remove('addMenu', {path:'/', domain:'localhost'})\\n          Cookie.remove('token', {path:'/', domain:'localhost'})\\n          //router.push('/login') does not work, must re-load\\n          router.go(0)\\n        }\\n\\n      \", -1))\n\nimport CodeModel from '@/components/CodeModel.vue'\nimport Prism from \"prismjs\";\nimport {titleData} from '@/data/menuData'\nimport {useCounterStore} from '@/store/index'\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'OtherOne',\n  setup(__props) {\n\nPrism.highlightAll()\nconst useStore = useCounterStore()\nconst titles:titleData[] = [\n        {\n          id:'ot1',\n          title:'项目快速概述'\n        },\n\n        {\n          id:'ot2',\n          title:'问题一：刷新后菜单栏内容会直接消失'\n        },\n        {\n          id:'ot3',\n          title:'问题二：菜单内容无法清除'\n        }\n      ]        \n\nuseStore.titles = titles\n\n\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _hoisted_4,\n      _hoisted_5,\n      _hoisted_6,\n      _hoisted_7,\n      _hoisted_8,\n      _hoisted_9,\n      _createVNode(CodeModel, { num: \"cm1\" }, {\n        default: _withCtx(() => [\n          _hoisted_10\n        ]),\n        _: 1\n      }),\n      _hoisted_11,\n      _createVNode(CodeModel, { num: \"cm2\" }, {\n        default: _withCtx(() => [\n          _hoisted_12\n        ]),\n        _: 1\n      }),\n      _hoisted_13,\n      _createVNode(CodeModel, { num: \"cm3\" }, {\n        default: _withCtx(() => [\n          _hoisted_14\n        ]),\n        _: 1\n      }),\n      _hoisted_15,\n      _hoisted_16,\n      _createVNode(CodeModel, { num: \"cm4\" }, {\n        default: _withCtx(() => [\n          _hoisted_17\n        ]),\n        _: 1\n      })\n    ])\n  ]))\n}\n}\n\n})","import script from \"./OtherOne.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./OtherOne.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./OtherOne.vue?vue&type=style&index=0&id=27e75408&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-27e75408\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","style","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","id","_hoisted_6","_hoisted_7","src","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_defineComponent","__name","setup","__props","Prism","useStore","useCounterStore","titles","title","_ctx","_cache","_openBlock","_createElementBlock","_createVNode","CodeModel","num","default","_withCtx","_","__exports__"],"sourceRoot":""}